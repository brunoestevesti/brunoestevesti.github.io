<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finanças do Bruno e Talita</title>
    <link rel="stylesheet" href="style.css">
<script>
(function(){
  function add(src, onerr){
    var s=document.createElement('script');
    s.src=src; s.defer=false; s.async=false;
    s.onload=function(){ console.log('Chart.js carregado:', src); };
    s.onerror=onerr||function(){};
    document.head.appendChild(s);
  }
  add('https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js', function(){
    add('https://unpkg.com/chart.js@4.4.4/dist/chart.umd.min.js', function(){
      console.warn('Falha ao carregar Chart.js de ambos CDNs. O app continuará sem gráficos.');
      window.__NO_CHART__ = true;
    });
  });
})();
</script>
<link rel="icon" href="data:,">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <h1>💰 Finanças do Bruno e Talita</h1>
                <p>Seu aplicativo de controle financeiro pessoal</p>
            </div>

            <!-- Login Form -->
            <div id="loginForm" class="login-form-container">
                <div class="card">
                    <div class="card__body">
                        <h2>🔐 Fazer Login</h2>
                        <form id="loginFormElement" class="login-form">
                            <div class="form-group">
                                <label for="loginUser" class="form-label">Usuário</label>
                                <input type="text" id="loginUser" class="form-control" required placeholder="Digite seu usuário">
                            </div>
                            <div class="form-group">
                                <label for="loginPassword" class="form-label">Senha</label>
                                <input type="password" id="loginPassword" class="form-control" required placeholder="Digite sua senha">
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn--primary btn--full-width">
                                    ✅ Entrar
                                </button>
                            </div>
                        </form>
                        <div class="login-options">
                            <button class="btn-link" id="showRegisterBtn">📝 Primeira vez? Criar conta</button>
                            <button class="btn-link" id="resetPasswordBtn">❓ Esqueceu a senha?</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Register Form -->
            <div id="registerForm" class="login-form-container" style="display: none;">
                <div class="card">
                    <div class="card__body">
                        <h2>📝 Criar Conta</h2>
                        <p class="form-help">Defina suas credenciais para primeiro acesso</p>
                        <form id="registerFormElement" class="login-form">
                            <div class="form-group">
                                <label for="registerUser" class="form-label">Usuário</label>
                                <input type="text" id="registerUser" class="form-control" required placeholder="Escolha um nome de usuário">
                            </div>
                            <div class="form-group">
                                <label for="registerPassword" class="form-label">Senha</label>
                                <input type="password" id="registerPassword" class="form-control" required placeholder="Crie uma senha">
                            </div>
                            <div class="form-group">
                                <label for="confirmPassword" class="form-label">Confirmar Senha</label>
                                <input type="password" id="confirmPassword" class="form-control" required placeholder="Digite a senha novamente">
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn--primary btn--full-width">
                                    ✅ Criar Conta
                                </button>
                            </div>
                        </form>
                        <div class="login-options">
                            <button class="btn-link" id="showLoginBtn">🔙 Voltar para login</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reset Password Form -->
            <div id="resetForm" class="login-form-container" style="display: none;">
                <div class="card">
                    <div class="card__body">
                        <h2>🔄 Redefinir Senha</h2>
                        <p class="form-help">Digite seu usuário para redefinir a senha</p>
                        <form id="resetFormElement" class="login-form">
                            <div class="form-group">
                                <label for="resetUser" class="form-label">Usuário</label>
                                <input type="text" id="resetUser" class="form-control" required placeholder="Digite seu usuário">
                            </div>
                            <div class="form-group">
                                <label for="newPassword" class="form-label">Nova Senha</label>
                                <input type="password" id="newPassword" class="form-control" required placeholder="Digite a nova senha">
                            </div>
                            <div class="form-group">
                                <label for="confirmNewPassword" class="form-label">Confirmar Nova Senha</label>
                                <input type="password" id="confirmNewPassword" class="form-control" required placeholder="Digite a nova senha novamente">
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn--primary btn--full-width">
                                    ✅ Redefinir Senha
                                </button>
                            </div>
                        </form>
                        <div class="login-options">
                            <button class="btn-link" id="backToLoginBtn">🔙 Voltar para login</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App (Hidden initially) -->
    <div id="mainApp" class="app" style="display: none;">
        <!-- Header -->
        <header class="header">
            <div class="container">
                <h1 class="header__title">💰 Finanças do Bruno e Talita</h1>
                <div class="header__user-section">
                    <span class="user-welcome">Olá, <span id="loggedUserName">Usuário</span>!</span>
                    <button class="btn btn--outline btn--sm" id="logoutBtn">
                        🚪 Sair
                    </button>
                </div>
                <nav class="header__nav">
                    <button class="nav-btn nav-btn--active" data-section="dashboard">Dashboard</button>
                    <button class="nav-btn" data-section="adicionar">Adicionar</button>
                    <button class="nav-btn" data-section="historico">Histórico</button>
                </nav>
            </div>
        </header>

        <main class="main">
            <div class="container">
                <!-- Dashboard Section -->
                <section id="dashboard" class="section section--active">
                    <h2 class="section__title">Resumo Financeiro</h2>
                    
                    <!-- Saldo Card -->
                    <div class="saldo-card card">
                        <div class="card__body">
                            <div class="saldo-info">
                                <div class="saldo-main">
                                    <h3>Saldo Atual</h3>
                                    <div class="saldo-valor" id="saldoValor">R$ 0,00</div>
                                    <div class="saldo-status" id="saldoStatus">Contas em dia</div>
                                </div>
                                <button class="btn btn--outline" id="acertarContasBtn">
                                    🤝 Acertar Contas
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Resumo dos Parceiros -->
                    <div class="resumo-grid">
                        <div class="resumo-card card">
                            <div class="card__body">
                                <h4>👤 Bruno</h4>
                                <div class="valor-parceiro" id="gastoBruno">R$ 0,00</div>
                                <small>Total gasto este mês</small>
                            </div>
                        </div>
                        <div class="resumo-card card">
                            <div class="card__body">
                                <h4>👤 Talita</h4>
                                <div class="valor-parceiro" id="gastoTalita">R$ 0,00</div>
                                <small>Total gasto este mês</small>
                            </div>
                        </div>
                    </div>

                    <!-- Gastos Recentes -->
                    <div class="gastos-recentes card">
                        <div class="card__body">
                            <h4>📋 Gastos Recentes</h4>
                            <div class="gastos-recentes-lista" id="gastosRecentesLista">
                                <div class="empty-state">
                                    <div class="empty-state-icon">📄</div>
                                    <p>Nenhuma despesa registrada ainda</p>
                                    <small>Adicione sua primeira despesa para começar</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Gráfico de Categorias -->
                    <div class="chart-card card">
                        <div class="card__body">
                            <h4>📊 Gastos por Categoria</h4>
                            <div class="chart-container" style="position: relative; height: 300px;">
                                <canvas id="categoryChart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Adicionar Despesa Section -->
                <section id="adicionar" class="section">
                    <h2 class="section__title">➕ Adicionar Despesa</h2>
                    
                    <div class="form-card card">
                        <div class="card__body">
                            <form id="despesaForm" class="despesa-form">
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="descricao" class="form-label">Descrição</label>
                                        <input type="text" id="descricao" class="form-control" required placeholder="Ex: Supermercado, Jantar">
                                    </div>

                                    <div class="form-group">
                                        <label for="valor" class="form-label">Valor (R$)</label>
                                        <input type="number" id="valor" class="form-control" step="0.01" required placeholder="0,00">
                                    </div>

                                    <div class="form-group">
                                        <label for="categoria" class="form-label">Categoria</label>
                                        <select id="categoria" class="form-control" required>
                                            <option value="">Selecione uma categoria</option>
                                            <option value="Alimentação">🍽️ Alimentação</option>
                                            <option value="Moradia">🏠 Moradia</option>
                                            <option value="Transporte">🚗 Transporte</option>
                                            <option value="Lazer">🎮 Lazer</option>
                                            <option value="Saúde">🏥 Saúde</option>
                                            <option value="Outros">📦 Outros</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label for="quemPagou" class="form-label">Quem Pagou</label>
                                        <select id="quemPagou" class="form-control" required>
                                            <option value="">Selecione quem pagou</option>
                                            <option value="Bruno">👤 Bruno</option>
                                            <option value="Talita">👤 Talita</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="recorrente" class="checkbox">
                                        <label for="recorrente" class="checkbox-label">Despesa recorrente</label>
                                    </div>
                                </div>

                                <div class="form-group" id="frequenciaGroup" style="display: none;">
                                    <label for="frequencia" class="form-label">Frequência</label>
                                    <select id="frequencia" class="form-control">
                                        <option value="">Selecione a frequência</option>
                                        <option value="Mensal">📅 Mensal</option>
                                        <option value="Semanal">📅 Semanal</option>
                                        <option value="Quinzenal">📅 Quinzenal</option>
                                    </select>
                                </div>

                                <div class="form-actions">
                                    <button type="submit" class="btn btn--primary btn--full-width">
                                        ✅ Salvar Despesa
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </section>

                <!-- Histórico Section -->
                <section id="historico" class="section">
                    <h2 class="section__title">📈 Histórico de Despesas</h2>
                    
                    <div class="historico-filters">
                        <div class="filters-row">
                            <select id="filtroMes" class="form-control">
                                <option value="">Todos os meses</option>
                            </select>
                            <select id="filtroCategoria" class="form-control">
                                <option value="">Todas as categorias</option>
                                <option value="Alimentação">🍽️ Alimentação</option>
                                <option value="Moradia">🏠 Moradia</option>
                                <option value="Transporte">🚗 Transporte</option>
                                <option value="Lazer">🎮 Lazer</option>
                                <option value="Saúde">🏥 Saúde</option>
                                <option value="Outros">📦 Outros</option>
                            </select>
                            <select id="filtroParceiro" class="form-control">
                                <option value="">Ambos</option>
                                <option value="Bruno">👤 Bruno</option>
                                <option value="Talita">👤 Talita</option>
                            </select>
                        </div>
                    </div>

                    <!-- Resumo Mensal -->
                    <div class="resumo-mensal card" id="resumoMensal" style="display: none;">
                        <div class="card__body">
                            <h4 id="resumoMensalTitulo">Resumo do Mês</h4>
                            <div class="resumo-mensal-grid">
                                <div class="resumo-mensal-item">
                                    <span>Total Gasto:</span>
                                    <strong id="resumoMensalTotal">R$ 0,00</strong>
                                </div>
                                <div class="resumo-mensal-item">
                                    <span>Bruno:</span>
                                    <strong id="resumoMensalBruno">R$ 0,00</strong>
                                </div>
                                <div class="resumo-mensal-item">
                                    <span>Talita:</span>
                                    <strong id="resumoMensalTalita">R$ 0,00</strong>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="historico-lista" id="historicoLista">
                        <div class="empty-state">
                            <div class="empty-state-icon">📄</div>
                            <p>Nenhuma despesa encontrada</p>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modal de Confirmação -->
    <div id="confirmModal" class="modal hidden">
        <div class="modal-content">
            <h3>Confirmar Ação</h3>
            <p id="confirmMessage"></p>
            <div class="modal-actions">
                <button class="btn btn--secondary" id="cancelBtn">Cancelar</button>
                <button class="btn btn--primary" id="confirmBtn">Confirmar</button>
            </div>
        </div>
    </div>

    <script>
  // >>> Preencha estas variáveis com os valores do seu backend no Render <<<
  window.BACKEND_URL = "https://SEU_SERVICO.onrender.com"; // ex.: https://financas-backend.onrender.com
  window.API_KEY = "SUA_API_KEY"; // mesma chave configurada no Render
</script>

\1
</body>
</html>